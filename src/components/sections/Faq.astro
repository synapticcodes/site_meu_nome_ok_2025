---
interface Props {
  content: {
    title: string;
    items: readonly { question: string; answer: string }[];
  };
  schemaId?: string;
}

const { content, schemaId = 'faq-schema' } = Astro.props as Props;
---
<section id="faq" class="relative isolate overflow-hidden bg-neutral-50">
  <div class="absolute inset-0 bg-gradient-to-b from-white via-neutral-50 to-neutral-100" aria-hidden="true" />
  <div class="relative mx-auto flex w-full max-w-6xl flex-col gap-12 px-6 py-24">
    <div class="max-w-2xl space-y-4">
      <span class="text-xs font-semibold uppercase tracking-[0.3em] text-primary/80">Dúvidas</span>
      <h2 class="text-h2 text-neutral-900">{content.title}</h2>
      <p class="text-neutral-600">Respostas diretas para as perguntas mais comuns de quem está começando a negociar com a Meu Nome OK.</p>
    </div>
    <div class="space-y-4">
      {content.items.map((item, index) => (
        <details
          class="group relative overflow-hidden rounded-3xl border border-white/70 bg-white/90 p-6 shadow-[0_26px_60px_-40px_rgba(102,42,231,0.35)] backdrop-blur transition duration-200 open:shadow-[0_30px_70px_-38px_rgba(102,42,231,0.45)]"
          open={index === 0}
        >
          <summary class="flex cursor-pointer items-center justify-between gap-4 text-left text-lg font-semibold text-neutral-900">
            {item.question}
            <span class="flex h-9 w-9 items-center justify-center rounded-full bg-primary/10 text-primary transition duration-200 group-open:rotate-45">
              <svg class="h-4 w-4" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.7" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" d="M10 4.5v11m5.5-5.5h-11" />
              </svg>
            </span>
          </summary>
          <div class="mt-4 border-t border-neutral-100/60 pt-4 text-neutral-600">
            {item.answer}
          </div>
        </details>
      ))}
    </div>
  </div>
</section>
<script type="application/ld+json" is:inline id={schemaId}>
  {JSON.stringify({
    '@context': 'https://schema.org',
    '@type': 'FAQPage',
    mainEntity: content.items.map((item) => ({
      '@type': 'Question',
      name: item.question,
      acceptedAnswer: {
        '@type': 'Answer',
        text: item.answer
      }
    }))
  })}
</script>
